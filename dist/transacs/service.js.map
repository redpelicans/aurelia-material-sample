{"version":3,"sources":["transacs/service.js"],"names":[],"mappings":";;;;;;;;;;;;8BAAe,kBAAkB;;;;gCACZ,mBAAmB;;sCACV,0BAA0B;;IAGnC,cAAc;AACtB,WADQ,cAAc,CACrB,eAAe,EAAC;;;AAC1B,WAAO,CAAC,GAAG,CAAC,wCAAwC,CAAC,CAAC;AACtD,QAAI,CAAC,MAAM,GAAG,iCAAG,iCAAiC,CAAC,CAAC;AACpD,QAAI,CAAC,eAAe,GAAG,eAAe,CAAC;AACvC,QAAI,CAAC,eAAe,EAAE,CAAC;GACxB;;wBANkB,cAAc;;;;WAQlB,2BAAE;;;AACf,UAAI,CAAC,MAAM,CAAC,EAAE,CAAC,gBAAgB,EAAE,UAAA,KAAK,EAAI;AACxC,cAAK,eAAe,CAAC,OAAO,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC;OACvD,CAAC,CAAC;KACJ;;;WAEQ,mBAAC,EAAE,EAAC;AACX,aAAO,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,gBAAgB,EAAE,EAAE,CAAC,CAAC;KAC7D;;;WAEG,cAAC,MAAM,EAAC;;;AACV,UAAI,OAAO,GAAG,IAAI,OAAO,CAAE,UAAC,OAAO,EAAE,MAAM,EAAI;AAC7C,eAAK,MAAM,CAAC,IAAI,CAAC,eAAe,EAAE,MAAM,EAAE,UAAC,GAAG,EAAE,QAAQ,EAAK;AAC3D,cAAG,GAAG,EAAC,OAAO,MAAM,CAAC,GAAG,CAAC,CAAC;AAC1B,iBAAO,CAAC,QAAQ,CAAC,CAAC;SACnB,CAAC,CAAC;OACJ,CAAC,CAAA;AACF,aAAO,OAAO,CAAC;KAChB;;;AA1BkB,gBAAc,GADlC,sBAHO,MAAM,0BACN,eAAe,CAEC,CACH,cAAc,KAAd,cAAc;SAAd,cAAc;;;qBAAd,cAAc","file":"transacs/service.js","sourcesContent":["import io from 'socket.io-client';\nimport {inject} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport default class TransacService {\n  constructor(eventAggregator){\n    console.log('Init socket IO and EventAggregator ...');\n    this.socket = io(\"http://rp1.redpelicans.com:3005\");\n    this.eventAggregator = eventAggregator;\n    this.serverSubscribe();\n  }\n\n  serverSubscribe(){\n    this.socket.on('transacs:event', event => {\n      this.eventAggregator.publish('transacs:event', event);\n    });\n  }\n\n  subscribe(cb){\n    return this.eventAggregator.subscribe('transacs:event', cb);\n  }\n\n  load(params){\n    let promise = new Promise( (resolve, reject) =>{\n      this.socket.emit('transacs:load', params, (err, transacs) => {\n        if(err)return reject(err);\n        resolve(transacs);\n      });\n    })\n    return promise;\n  }\n}\n"],"sourceRoot":"/source/"}